function renderDealShareTable() {
  const wrapper = document.getElementById("crt-deal-share-table-wrapper");
  const engrave = characterData.info.engraves;   // ex) "일격필살", "진화의 유산", …

  // 1) 겁화/멸화 보석만 뽑아서 스킬, 레벨, 타입 리스트 만들기
  const gems = characterData.gems;
  const entries = gems.skills
    .map((skill, i) => ({
      skill,
      level: gems.levels[i],
      type: gems.types[i]
    }))
    .filter(e =>
      (e.type === "겁화" || e.type === "멸화")
      && e.skill && e.skill !== "-"
    );

  // 중복 스킬이 있을 수 있으니, skill 이름별 첫번째 항목만 남기기
  const uniq = {};
  entries.forEach(e => {
    if (!(e.skill in uniq)) uniq[e.skill] = e;
  });
  let skills = Object.values(uniq);

  // 2) 각인별 추가 필터링
  if (engrave === "일격필살") {
    // dealShareDict["일격필살"] 에 있는 스킬만
    const allowed = new Set(Object.keys(dealShareDict["일격필살"]));
    skills = skills.filter(e => allowed.has(e.skill));
  } else if (engrave === "진화의 유산") {
    // 오직 싱크 스킬
    const allowed = new Set(Object.keys(dealShareDict["진화의 유산"]));
    skills = skills.filter(e => allowed.has(e.skill));
  } else if (engrave === "멈출 수 없는 충동") {
    // 항상 악마 스킬, 데몬 비전은 dict에 있으면 추가
    const allowed = new Set(Object.keys(dealShareDict["멈출 수 없는 충동"]));
    skills = skills.filter(e => allowed.has(e.skill));
  }

  // 3) HTML 생성
  let html = `<div class="data-table">
      <h4>딜지분 설정</h4>
      <table>
        <thead>
          <tr>
            <th>스킬</th>
            <th>레벨</th>
            <th>종류</th>
            <th>딜지분</th>
          </tr>
        </thead>
        <tbody>`;
  skills.forEach(({ skill, level, type }) => {
    const val = getDealShare(engrave, skill);
    html += `<tr>
      <td>${skill}</td>
      <td>${level}</td>
      <td>${type}</td>
      <td>
        <input type="number"
               data-skill="${skill}"
               value="${val}"
               />
      </td>
    </tr>`;
  });
  html += `</tbody></table></div>`;

  wrapper.innerHTML = html;
}


/** 업로드 버튼 클릭 시 호출 */
function updateCharacterDealShare() {
  const shares = [];
  document.querySelectorAll('#crt-deal-share-table-wrapper input[data-skill]').forEach(input => {
    shares.push({
      skill: input.dataset.skill,
      share: Number(input.value) || 0
    });
  });
  // TODO: 서버 전송 or characterData 에 저장
  console.log("DealShare:", shares);
  alert("딜지분이 콘솔에 출력되었습니다.");
}

// 1) 각인명 → {스킬명: 딜지분, …}
const dealShareDict = {
  "분노의 망치": { //간즈
    "퍼펙트 스윙": 28.6,
    "풀 스윙": 11.2,
    "사이즈믹 해머": 11,
    "어스 이터": 7.8
  },
  "중력 수련": { //예배
    "중력 가중 스킬": 62.6,
    "퍼펙트 스윙": 6.7,
    "사이즈믹 해머": 7,
    "어스 웨이브": 4.7,
    "어스 이터": 2
  },
  "광기": { //마스터Asia
    "피니쉬 스트라이크": 13.7,
    "헬 블레이드": 12,
    "오버드라이브": 17.6,
    "소드 스톰": 7.7,
    "템페스트 슬래쉬": 4.4
  },
  "광전사의 비기": { //이카사란
    "피니쉬 스트라이크": 11,
    "레드 더스트": 4.1,
    "헬 블레이드": 8.7,
    "블러디 러쉬": 26.4,
    "오버드라이브": 18.3
  },
  "포식자": { //미인불멸
    "길로틴": 13.2,
    "브루탈 임팩트": 17.1,
    "퓨리어스 클로": 9.1,
    "페이탈 소드": 8.8,
    "볼케이노 이럽션": 13.2,
    "파이널 블로": 5.6
  },
  "처단자": { //쿠로슬레
    "볼케이노 이럽션": 11.8,
    "브루탈 임팩트": 15.2,
    "퓨리어스 클로": 5.8,
    "블러드러스트": 28.4,
    "길로틴": 9.9
  },
  "전투 태세": { //소녀양점순
    "방패 밀치기": 12.6,
    "방패 격동": 7.3,
    "리프 어택": 17.5,
    "가디언의 낙뢰": 21.9,
    "방패 돌진": 13.5
  },
  "고독한 기사": { //랜스
    "버스트 캐넌": 25.7,
    "차지 스팅거": 26.4,
    "파이어 불릿": 2.5,
    "대쉬 어퍼 파이어": 6.6,
    "카운터 스피어": 4.6,
    "스피어 샷": 10.8
  },
  "세맥타통": { //센이랑치히로, 고구마유시
    "환영격": 6.7,
    "난화격": 15.2,
    "풍뢰일광포": 5.3,
    "여래신장": 11.7,
    "기공장": 5.3,
    "벽력장": 16.1,
    "낙영장": 12.3
  },
  "역천지체": { //Diadem, 백깡쥐
    "환영격": 7.3,
    "풍뢰일광포": 10.0,
    "여래신장": 10.3,
    "난화격": 14.3,
    "벽력장": 6.7,
    "기공장": 9.6,
    "섬열파": 9.6
  },
  "오의": { //외할무니
    "오의 : 창룡패황권": 31.1,
    "오의 : 화룡천상": 17.8,
    "오의 : 나선경": 7.1,
    "오의 : 폭쇄진": 16.4
  },
  "초심": { //필례
    "내공연소": 15.6,
    "방천격": 22.8,
    "선풍용류각": 13.3,
    "뇌명각": 6.2,
    "섬열란아": 9.3
  },
  "권왕파천무": { //보라냥이집사16
    "권왕십이식": 32.7,
    "유성 낙하": 5.9,
    "파천섬광": 23,
    "천기심권": 7.7
  },
  "수라의 길": { //이다
    "비상격": 5,
    "파천섬광": 12.2,
    "수라결 기본 공격": 47.3,
    "유성 낙하": 5,
    "진 파공권": 5.4
  },
  "일격필살": { //항상그놈, 환업
    "방천격": 2.4,
    "오의 : 뇌호격": 19.3,
    "오의 : 호왕출현": 6.7,
    "오의 : 풍신초래": 6.7
  },
  "오의난무": { //이정재
    "오의 : 뇌호격": 23.4,
    "오의 : 풍신초래": 11.6,
    "방천격": 6.3,
    "오의 : 호왕출현": 21.5,
    "오의 : 폭쇄진": 13.6
  },
  "극의: 체술": { //불포차
    "폭렬권": 10.1,
    "용의 강림": 5,
    "철포난격": 13.1,
    "일망 타진": 4.2,
    "난타연권": 12.9,
    "죽음의 선고": 3.2
  },
  "충격 단련": { //퐁이
    "진 용출권": 10,
    "심판": 6.4,
    "풍신권": 13.8,
    "초신성 폭발": 11.7,
    "파쇄격": 14.9,
    "죽음의 선고": 17.2
  },
  "절제": { //야근좀그만시켜주세요
    "열공참": 4.5,
    "연환섬": 8.8,
    "청룡출수": 8,
    "선풍참흔": 9.6,
    "반월섬": 13.1,
    "맹룡열파": 7
  },
  "절정": { //짹키창
    "사두룡격": 6.2,
    "굉열파": 10.2,
    "적룡포": 19,
    "유성강천": 8,
    "반월섬": 3.1,
    "맹룡열파": 9.1
  },
  "피스메이커": { //겊삶, 꼬리
    "절멸의 탄환": 12.1,
    "포커스 샷": 13.9,
    "마탄의 사수": 16.1,
    "샷건 연사": 3.9,
    "타겟 다운": 10.8,
    "레인 오브 불릿": 5.9,
    "대재앙": 6.2,
    "퍼펙트 샷": 3.9
  },
  "사냥의 시간": { //사혁, Feat
    "포커스 샷": 14.3,
    "타겟 다운": 11,
    "레인 오브 불릿": 7,
    "퍼펙트 샷": 5.7,
    "대재앙": 7.7,
    "메테오 스트림": 4.2
  },
  "전술 탄환": { //황혼님
    "심판의 날": 18,
    "샷건 연사": 15.5,
    "샷건의 지배자": 11,
    "종말의 전조": 8.7,
    "조준 사격": 5.1,
    "최후의 만찬": 11.3
  },
  "핸드거너": { //채윅
    "데스페라도": 17,
    "잔혹한 추적자": 6.1,
    "퀵 샷": 6.7,
    "ATO2 유탄": 4.9,
    "메테오 스트림": 8.3,
    "데스파이어": 4.5,
    "이퀄리브리엄": 8.9
  },
  "포격 강화": { //몽키
    "공중 폭격": 5.3,
    "고압열탄": 5.3,
    "포격 스킬": 40.5,
    "중력 폭발": 3.3,
    "미사일 폭격": 5.3
  },
  "화력 강화": { //HBpencil
    "미사일 폭격": 13.9,
    "공중 폭격": 12.9,
    "고압열탄": 13.9,
    "다연장로켓포": 6.4,
    "화염방사기": 6.4
  },
  "진화의 유산": { //앤늉
    "싱크 스킬": 68.5
  },
  "아르데타인의 기술": { //꼬마완두
    "명령: 카펫": 7.4,
    "에너지 버스터": 20,
    "명령: 레이드 미사일": 9.7,
    "아발란체": 4.9,
    "명령: 베이비 드론": 11.8,
    "어나힐레이션 모드": 7.3
  },
  "죽음의 습격": { //공룡
    "실버호크 스킬": 23,
    "스나이프": 19.8,
    "블레이드 스톰": 3.2,
    "차징 샷": 8,
    "샤프 슈터": 7.5,
    "호크 샷": 6.7
  },
  "두 번째 동료": { //Boommm, 봉킹
    "실버호크 스킬": 21.6,
    "스나이프": 15.8,
    "차징 샷": 9.3,
    "샤프 슈터": 7.9,
    "호크 샷": 9.4,
    "애로우 해일": 5.6,
    "블레이드 스톰": 5.6
  },
  "상급 소환사": { //요정
    "고대의 정령 스킬": 51,
    "마력의 질주": 2.9,
    "대지 붕괴": 5.2,
    "고대의 창": 9
  },
  "넘치는 교감": { //삼순이빵
    "슈르디": 3.2,
    "파우루": 13.9,
    "마리린": 16.4,
    "대지 붕괴": 7,
    "엘씨드": 13.2,
    "고대의 창": 11.4
  },
  "점화": { //힌냥이
    "익스플로전": 15.8,
    "종말의 날": 28.2,
    "인페르노": 5.6,
    "천벌": 15.2,
    "숭고한 해일": 7.9
  },
  "환류": { //미호밍, 방울토마토라면
    "리버스 그래비티": 15,
    "엘리멘탈 리액트": 11,
    "숭고한 해일": 9.3,
    "아이스 애로우": 12.2,
    "천벌": 10.3,
    "인페르노": 8,
    "블레이즈": 5.2
  },
  "황제의 칙령": { //병아리사세여
    "다크 리저렉션": 16.7,
    "황제": 16.3,
    "이보크": 15.2,
    "셀레스티얼 레인": 10.1,
    "언리미티드 셔플": 8.9
  },
  "황후의 은총": { //세윳
    "셀레스티얼 레인": 16.7,
    "시크릿 가든": 20.6,
    "세렌디피티": 6.8,
    "포카드": 10.4
  },
  "질풍노도": { //김시끄
    "칼바람": 15.8,
    "여우비 스킬": 4.1,
    "싹쓸바람": 5,
    "몰아치기": 8.6,
    "회오리 걸음": 5.4,
    "바람송곳": 15.8
  },
  "이슬비": { //하늬바람
    "뙤약볕": 12,
    "소나기": 7.2,
    "센바람": 5.5,
    "여우비 스킬": 7,
    "소용돌이": 8.5,
    "싹쓸바람": 11.2
  },
  "야성": { //젤리s0ng, 곰주제
    "여우 불꽃": 12.2,
    "여우 구슬": 7.4,
    "여우 꼬리물기": 9.5,
    "둔갑 금술 스킬": 30.1,
    "바위 곰": 11.4,
    "슈웅 곰": 13.6,
    "여우 폴짝": 13.6
  },
  "환수 각성": { //미호에용
    "슈웅 곰": 12.8,
    "여우 불꽃": 13.8,
    "빙글빙글 꽝": 22,
    "바위 곰": 16.5,
    "데굴방아": 11.7,
    "할퀴기": 1.5
  },
  "버스트 강화": { //김짜거
    "버스트 스킬": 57.6,
    "어스 슬래쉬": 3.1,
    "터닝 슬래쉬": 4.6,
    "블레이드 댄스": 5.8,
    "블리츠 러시": 7.2
  },
  "잔재된 기운": { //치즈
    "어스 슬래쉬": 6.5,
    "버스트 스킬": 19.1,
    "소울 앱소버": 13,
    "보이드 스트라이크": 9.8,
    "트윈 쉐도우": 8,
    "데스 센텐스": 10.8
  },
  "멈출 수 없는 충동": { //킹하산
    "악마 스킬": 70.4,
    "데몬 비전": 0.9
  },
  "완벽한 억제": { //충모닉
    "크루얼 커터": 13.5,
    "그라인드 체인": 11.4,
    "스피닝 웨폰": 10.9,
    "피어스 쏜": 5.8,
    "데시메이트": 5.3
  },
  "갈증": { //포서린
    "레이지 스피어": 17.1,
    "라스트 그래피티": 15.2,
    "댄싱 오브 퓨리": 12.9,
    "쉐도우 스톰": 7.8,
    "사일런트 스매셔": 9.7
  },
  "달의 소리": { //포롱악마
    "댄싱 오브 퓨리": 14.3,
    "라스트 그래피티": 16.8,
    "레이지 스피어": 21.5
  },
  "만월의 집행자": { //자영구
    "소울 시너스": 17.6,
    "베스티지": 19,
    "길로틴 스윙": 27.6
  },
  "그믐의 경계": { //조울증
    "길로틴 스윙": 16.4,
    "베스티지": 12.6,
    "하베스트": 5.2,
    "리탈 스피닝": 10.2,
    "소울 시너스": 9.8
  }
};

// 2) 각인명(engrave)과 스킬(skill)을 넣으면 value 리턴
function getDealShare(engrave, skill) {
  const m = dealShareDict[engrave];
  return m && m[skill] != null ? m[skill] : 0;
}
